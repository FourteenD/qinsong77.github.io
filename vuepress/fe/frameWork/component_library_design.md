---
title: 组件库设计
---


- [面试官: 写过『通用前端组件』吗?](https://www.jianshu.com/p/81128ab478e9)

### 前端组件库的设计原则

#### 细粒度的考量

从软件的设计模式上，确定组件的**单一职责原则**，原则上一个组件只专注一件事情，单一职责的组件的好处很明显，由于职责单一就可以最大可能性地**复用**组件。保证组件单一的最大好处**就是方便单元测试**。
同时要考虑划分过细而导致**组件碎片化**的问题。

#### 通用性考量

组件的形态(DOM结构)永远是千变万化的,但是其行为(逻辑)是固定的,因此通用组件的秘诀之一就是将 DOM 结构的控制权交给开发者,组件只负责行为和最基本的 DOM 结构。

预留合适的api，或者叫pros等，比如提供自定义渲染render，提过组件核心能力的同事也能根据业务上进行扩展。

#### 原子性设计

比如样式主题，在`sketch`文件中将最小颗粒度“原子(如颜色)”按照其使用意图作为名称进行命名；颗粒度再复杂一级的“分子(如字体)”变量名则由`typeface/weight/color/size`的组合排列产生。

#### 控制反转设计IOC

不是从上层开始使用底层构建或者组装依赖。而是从底层开始设计叠加，感觉有点像是从递归到动态规划的过程。比较明显的一个就是React中的高阶组件（HOC）

------

基于`Sketch`中的symbol功能，前端也需要将组件进行原子化，并根据`symbol`的变量命名将常用的大小、颜色创建为变量。

前端组件根据功能以及颗粒度可以分为“基础组件”和“高阶组件”。基础组件一般是页面中颗粒度中最小也是最常用的组件，例如`input`，`button`等；高阶组件通常是由基础组件进行一定的变形、组合或两者兼有而形成的；而高阶组件+基础组件最终组成了完整的页面。 为了满足2B场景下的整体风格替换，所有组件在开发的时候要将用到的颜色、字体等"原子"用变量的方式引入。

在目前前端开发中，样式的变量创建方式主要有两种：一是基于css原生支持的自定义变量，二是基于`less`、`scss`等css预编译器。要到自定义变量可能存在的浏览器兼容性问题，组件库可以采用了less作为样式开发的语言。less 是一门 CSS 预处理语言，除了之前提到的变量功能，还有嵌套、混合（mixin）、函数等方便的功能。


### 前端组件设计原则

- 层次结构和 UML 类图
- 扁平化、面向数据的 state/props
- 更加纯粹的 `State` 变化
- 高内聚，低耦合
- 辅助代码分离
- 提炼精华
- 及时模块化
- 集中/统一的状态管理

### Element-ui
- [Element-UI（2.11.1） 构建流程](https://juejin.cn/post/6844904003541663757)
