<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>学习笔记 | Sysuke&#39; NoteBook</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="person NoteBook power by VuePress & GitHub Page">
    
    <link rel="preload" href="/assets/css/0.styles.3ef51607.css" as="style"><link rel="preload" href="/assets/js/app.29d4c536.js" as="script"><link rel="preload" href="/assets/js/2.609aed4b.js" as="script"><link rel="preload" href="/assets/js/6.80030cb0.js" as="script"><link rel="prefetch" href="/assets/js/10.19b3dcd1.js"><link rel="prefetch" href="/assets/js/11.9a60efca.js"><link rel="prefetch" href="/assets/js/12.30d5502f.js"><link rel="prefetch" href="/assets/js/13.6bde2ac9.js"><link rel="prefetch" href="/assets/js/14.013abb7a.js"><link rel="prefetch" href="/assets/js/15.7bdb9a2f.js"><link rel="prefetch" href="/assets/js/16.f7ed6476.js"><link rel="prefetch" href="/assets/js/17.b9e886e0.js"><link rel="prefetch" href="/assets/js/18.b306780b.js"><link rel="prefetch" href="/assets/js/19.c66419e2.js"><link rel="prefetch" href="/assets/js/20.8131e61b.js"><link rel="prefetch" href="/assets/js/21.0636818c.js"><link rel="prefetch" href="/assets/js/22.2f26a21b.js"><link rel="prefetch" href="/assets/js/23.e115ecdb.js"><link rel="prefetch" href="/assets/js/24.80b0df5c.js"><link rel="prefetch" href="/assets/js/25.47d37264.js"><link rel="prefetch" href="/assets/js/26.e786f17e.js"><link rel="prefetch" href="/assets/js/27.d26964f1.js"><link rel="prefetch" href="/assets/js/28.41f96013.js"><link rel="prefetch" href="/assets/js/29.1d79adcc.js"><link rel="prefetch" href="/assets/js/3.b8fc32aa.js"><link rel="prefetch" href="/assets/js/30.99cde557.js"><link rel="prefetch" href="/assets/js/31.0e8288cd.js"><link rel="prefetch" href="/assets/js/32.c294609f.js"><link rel="prefetch" href="/assets/js/33.d0a6fd15.js"><link rel="prefetch" href="/assets/js/34.027cb3d3.js"><link rel="prefetch" href="/assets/js/35.8284d3af.js"><link rel="prefetch" href="/assets/js/36.2488af15.js"><link rel="prefetch" href="/assets/js/37.fd111277.js"><link rel="prefetch" href="/assets/js/38.7f952f9c.js"><link rel="prefetch" href="/assets/js/39.162b52d3.js"><link rel="prefetch" href="/assets/js/4.1337bf8a.js"><link rel="prefetch" href="/assets/js/40.c6601085.js"><link rel="prefetch" href="/assets/js/41.efca7723.js"><link rel="prefetch" href="/assets/js/42.a240f4e7.js"><link rel="prefetch" href="/assets/js/43.1c0a74c6.js"><link rel="prefetch" href="/assets/js/44.b1694f8e.js"><link rel="prefetch" href="/assets/js/5.67a48be8.js"><link rel="prefetch" href="/assets/js/7.51aa2b3f.js"><link rel="prefetch" href="/assets/js/8.fe7244f5.js"><link rel="prefetch" href="/assets/js/9.26225417.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3ef51607.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sysuke' NoteBook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  algorithm
</a></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  Demo
</a></div><div class="nav-item"><a href="/resume.html" class="nav-link">
  Resume
</a></div><div class="nav-item"><a href="https://github.com/qinsong77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  algorithm
</a></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  Demo
</a></div><div class="nav-item"><a href="/resume.html" class="nav-link">
  Resume
</a></div><div class="nav-item"><a href="https://github.com/qinsong77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/" aria-current="page" class="sidebar-link">LearnAndNoteList</a></li><li><a href="/fe/learn.html" aria-current="page" class="active sidebar-link">学习笔记</a></li><li><a href="/fe/achieve.html" class="sidebar-link">手写实现</a></li><li><a href="/fe/prototype.html" class="sidebar-link">原型、原型链、继承</a></li><li><a href="/fe/extend.html" class="sidebar-link">继承</a></li><li><a href="/fe/var_type.html" class="sidebar-link">变量和类型</a></li><li><a href="/fe/type_conversion.html" class="sidebar-link">类型转换</a></li><li><a href="/fe/context_execution_stack_this.html" class="sidebar-link">执行上下文、执行栈、this</a></li><li><a href="/fe/event_loop.html" class="sidebar-link">事件循环</a></li><li><a href="/fe/alwaysNote.html" class="sidebar-link">常用笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/vue/" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/vue/" class="sidebar-link">原理</a></li><li><a href="/fe/vue/alwaysNote.html" class="sidebar-link">常用笔记vue</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/css/" class="sidebar-heading clickable"><span>CSS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/css/" class="sidebar-link">Summary</a></li><li><a href="/fe/css/BFC.html" class="sidebar-link">BFC和清除浮动</a></li><li><a href="/fe/css/flex_grid.html" class="sidebar-link">flex和grid</a></li><li><a href="/fe/css/onepx.html" class="sidebar-link">1px及相关概念</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/dom/" class="sidebar-heading clickable"><span>Dom</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/dom/" class="sidebar-link">Summary</a></li><li><a href="/fe/dom/safety.html" class="sidebar-link">安全</a></li><li><a href="/fe/dom/canvas.html" class="sidebar-link">canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/webpack/" class="sidebar-heading clickable"><span>webpack</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/webpack/" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/frameWork/" class="sidebar-heading clickable"><span>frameWork</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/frameWork/" class="sidebar-link">Summary</a></li><li><a href="/fe/frameWork/microservices.html" class="sidebar-link">微前端</a></li><li><a href="/fe/frameWork/network.html" class="sidebar-link">网络相关</a></li><li><a href="/fe/frameWork/http.html" class="sidebar-link">HTTP 协议总结</a></li><li><a href="/fe/frameWork/https.html" class="sidebar-link">HTTPS 协议总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="内置类型"><a href="#内置类型" class="header-anchor">#</a> 内置类型</h3> <p>JavaScript目前有八种内置类型（包含ES6的symbol）：</p> <ul><li>null</li> <li>undefined</li> <li>string</li> <li>number</li> <li>boolean</li> <li>object</li> <li>symbol(es6)</li> <li>BigInt(es10)</li></ul> <p><a href="https://www.cnblogs.com/onepixel/p/5140944.html" target="_blank" rel="noopener noreferrer">细说 JavaScript 七种数据类型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="详解-undefined-与-null-的区别"><a href="#详解-undefined-与-null-的区别" class="header-anchor">#</a> <a href="https://www.cnblogs.com/onepixel/p/7337248.html" target="_blank" rel="noopener noreferrer">详解 undefined 与 null 的区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <h4 id="for循环中的let"><a href="#for循环中的let" class="header-anchor">#</a> for循环中的let</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
funcs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
funcs<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
funcs<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token comment">// 伪代码</span>
<span class="token comment">/**
(let i = 0) {
    funcs[0] = function() {
        console.log(i)
    };
}

(let i = 1) {
    funcs[1] = function() {
        console.log(i)
    };
}

(let i = 2) {
    funcs[2] = function() {
        console.log(i)
    };
};
**/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>疑问： 每一轮循环的变量i都是重新声明的，那它怎么知道上一轮循环的值，从而计算出本轮循环的值？</p> <p>这是因为 JavaScript 引擎内部会记住上一轮循环的值，初始化本轮的变量i时，就在上一轮循环的基础上进行计算。<strong>每次迭代循环时都创建一个新变量，并以之前迭代中同名变量的值将其初始化。</strong></p> <p>另外，for循环还有一个特别之处，就是设置循环变量的那部分是一个父作用域，而循环体内部是一个单独的子作用域。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// abc</span>
<span class="token comment">// abc</span>
<span class="token comment">// abc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="typeof-null-为-object-的bug"><a href="#typeof-null-为-object-的bug" class="header-anchor">#</a> typeof null 为 'object'的bug</h4> <blockquote><p>JavaScript中的数据在底层是以二进制存储，比如null所有存储值都是0，但是底层的判断机制，只要前三位为0，就会判定为object，所以才会有typeof null === 'object'这个bug。
<code>Number(null)</code>结果为0，<code>Number(undefined)为NaN</code></p></blockquote> <h4 id="instanceof-运算符用于检测构造函数的-prototype-属性是否出现在某个实例对象的原型链上"><a href="#instanceof-运算符用于检测构造函数的-prototype-属性是否出现在某个实例对象的原型链上" class="header-anchor">#</a> instanceof 运算符用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上</h4> <p>语法</p> <blockquote><p>object instanceof constructor</p></blockquote> <h4 id="使用object-prototype-hasownproperty-call-obj-key-比用obj-hasownproperty安全-因为非对象不会报错。"><a href="#使用object-prototype-hasownproperty-call-obj-key-比用obj-hasownproperty安全-因为非对象不会报错。" class="header-anchor">#</a> 使用Object.prototype.hasOwnProperty.call(obj, key) 比用obj.hasOwnProperty安全，因为非对象不会报错。</h4> <h3 id="js中-假-值列表-即if不执行-if-等流控制语句会自动执行其他类型值到布尔值的转换即boolean-null"><a href="#js中-假-值列表-即if不执行-if-等流控制语句会自动执行其他类型值到布尔值的转换即boolean-null" class="header-anchor">#</a> JS中“假”值列表，即if不执行(if 等流控制语句会自动执行其他类型值到布尔值的转换即Boolean(null))</h3> <ul><li>“”（空字符串）</li> <li>0、-0、NaN(无效数字)</li> <li>null、undefined</li> <li>false</li> <li>注意Infinity为真</li></ul> <h3 id="object-is-方法"><a href="#object-is-方法" class="header-anchor">#</a> <code>Object.is()</code>方法</h3> <blockquote><p>相等运算符（<code>==</code>）和严格相等运算符（<code>===</code>）。它们都有缺点，前者会自动转换数据类型，后者的<code>NaN</code>不等于自身，以及<code>+0</code>等于<code>-0</code>。<code>Object.is</code>用来比较两个值是否严格相等，与严格比较运算符（<code>===</code>）的行为基本一致，不同之处只有两个：一是<code>+0</code>不等于<code>-0</code>，二是<code>NaN</code>等于自身。</p></blockquote> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">0</span> <span class="token comment">//true</span>
<span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span> <span class="token comment">// false</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Polyfill</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Object<span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
 <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 针对+0 不等于 -0的情况</span>
     <span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">/</span> x <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> y<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token comment">// 针对NaN的情况</span>
   <span class="token keyword">return</span> x <span class="token operator">!==</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">!==</span> y<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
 writable<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="语言中所有的底层存储方式是是什么。"><a href="#语言中所有的底层存储方式是是什么。" class="header-anchor">#</a> 语言中所有的底层存储方式是是什么。</h3> <ul><li><p>数组(Array)
数组是一种聚合数据类型，它是将具有相同类型的若干变量有序地组织在一起的集合。数组可以说是最基本的数据结构，在各种编程语言中都有对应。一个数组可以分解为多个数组元素，按照数据元素的类型，数组可以分为整型数组、字符型数组、浮点型数组、指针数组和结构数组等。数组还可以有一维、二维以及多维等表现形式。</p></li> <li><p>栈( Stack)
栈是一种特殊的线性表，它只能在一个表的一个固定端进行数据结点的插入和删除操作。栈按照后进先出的原则来存储数据，也就是说，先插入的数据将被压入栈底，最后插入的数据在栈顶，读出数据时，从栈顶开始逐个读出。栈在汇编语言程序中，经常用于重要数据的现场保护。栈中没有数据时，称为空栈。</p></li> <li><p>队列(Queue)
队列和栈类似，也是一种特殊的线性表。和栈不同的是，队列只允许在表的一端进行插入操作，而在另一端进行删除操作。一般来说，进行插入操作的一端称为队尾，进行删除操作的一端称为队头。队列中没有元素时，称为空队列</p></li> <li><p>链表( Linked List)
链表是一种数据元素按照链式存储结构进行存储的数据结构，这种存储结构具有在物理上存在非连续的特点。链表由一系列数据结点构成，每个数据结点包括数据域和指针域两部分。其中，指针域保存了数据结构中下一个元素存放的地址。链表结构中数据元素的逻辑顺序是通过链表中的指针链接次序来实现的。</p></li> <li><p>树( Tree)
树是典型的非线性结构，它是包括，2个结点的有穷集合K。在树结构中，有且仅有一个根结点，该结点没有前驱结点。在树结构中的其他结点都有且仅有一个前驱结点，而且可以有两个后继结点，m≥0</p></li> <li><p>图(Graph)
图是另一种非线性数据结构。在图结构中，数据结点一般称为顶点，而边是顶点的有序偶对。如果两个顶点之间存在一条边，那么就表示这两个顶点具有相邻关系</p></li> <li><p>堆(Heap)
堆是一种特殊的树形数据结构，一般讨论的堆都是二叉堆。堆的特点是根结点的值是所有结点中最小的或者最大的，并且根结点的两个子树也是一个堆结构</p></li> <li><p>散列表(Hash)
散列表源自于散列函数(Hash function)，其思想是如果在结构中存在关键字和T相等的记录，那么必定在F(T)的存储位置可以找到该记录，这样就可以不用进行比较操作而直接取得所查记录</p></li></ul> <h4 id="javascript使用的是-堆-heap-和-栈-stack"><a href="#javascript使用的是-堆-heap-和-栈-stack" class="header-anchor">#</a> JavaScript使用的是 堆(Heap) 和 栈( Stack)</h4> <p>JavaScript基本类型数据都是直接按值存储在栈中的(Undefined、Null、不是new出来的布尔、数字和字符串)，每种类型的数据占用的内存空间的大小是确定的，并由系统自动分配和自动释放。这样带来的好处就是，内存可以及时得到回收，相对于堆来说 ，更加容易管理内存空间。</p> <p>JavaScript引用类型数据被存储于堆中 (如对象、数组、函数等，它们是通过拷贝和new出来的）。其实，说存储于堆中，也不太准确，因为，引用类型的数据的地址指针是存储于栈中的，当我们想要访问引用类型的值的时候，需要先从栈中获得对象的地址指针，然后，在通过地址指针找到堆中的所需要的数据。</p> <h4 id="set-map-weakmap-weakset"><a href="#set-map-weakmap-weakset" class="header-anchor">#</a> <a href="https://juejin.im/post/6844904169417998349" target="_blank" rel="noopener noreferrer">set, map, weakMap, weakSet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <h4 id="object-defineproperty-obj-prop-descriptor"><a href="#object-defineproperty-obj-prop-descriptor" class="header-anchor">#</a> <code>Object.defineProperty(obj, prop, descriptor)</code></h4> <ul><li><code>obj</code>: 要定义属性的对象。</li> <li><code>prop</code>: 要定义或修改的属性的名称或 <code>Symbol</code> 。</li> <li><code>descriptor</code>: 要定义或修改的属性描述符。</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 默认为 false，当且仅当该属性的 configurable 键值为 true 时，该属性的描述符才能够被改变，同时该属性也能从对应的对象上被删除。</span>
  enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 默认为 false。当且仅当该属性的 enumerable 键值为 true 时，该属性才会出现在对象的枚举属性中。（for...in 或 Object.keys 方法）</span>
  value<span class="token operator">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token comment">// 默认为 undefined。该属性对应的值。可以是任何有效的 JavaScript 值（数值，对象，函数等）。</span>
  writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当且仅当该属性的 writable 键值为 true 时，属性的值，也就是上面的 value，才能被赋值运算符改变。默认为 false。</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="object-freeze-和object-seal"><a href="#object-freeze-和object-seal" class="header-anchor">#</a> <code>Object.freeze()</code>和<code>Object.seal</code></h4> <p><code>Object.freeze()</code>方法可以冻结一个对象。一个被冻结的对象再也不能被修改；冻结了一个对象则不能向这个对象添加新的属性，不能删除已有属性，不能修改该对象已有属性的可枚举性、可配置性、可写性，以及不能修改已有属性的值。此外，冻结一个对象后该对象的原型也不能被修改。freeze() 返回和传入的参数相同的对象。</p> <ul><li>设置Object.preventExtension()，禁止添加新属性(绝对存在)</li> <li>设置writable为false，禁止修改(绝对存在)</li> <li>设置configurable为false，禁止配置(绝对存在)</li> <li>禁止更改访问器属性(getter和setter)
从上可知，Object.freeze()禁止了所有可设置的内容。</li></ul> <p>另外，可以使用<code>Object.isFrozen()</code>判断一个对象是否是冻结对象。</p> <p>Object.freeze()只是浅冻结，犹如浅拷贝。</p> <p><code>Object.seal()</code>方法封闭一个对象，阻止添加新属性并将所有现有属性标记为不可配置。当前属性的值只要可写就可以改变。</p> <ul><li>设置Object.preventExtension()，禁止添加新属性(绝对存在)</li> <li>设置configurable为false，禁止配置(绝对存在)</li> <li>禁止更改访问器属性(getter和setter)</li></ul> <p>使用<code>Object.isSealed()</code>判断一个对象是否是封闭对象。</p> <blockquote><p>使用<code>Object.freeze()</code>冻结的对象中的现有属性是不可变的。用<code>Object.seal()</code>密封的对象可以改变其现有属性。</p></blockquote> <p>freeze对象后，对象移动sealed</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>k<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">isSealed</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Object.preventExtensions()</code>方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//空对象是特殊情况，设置Object.preventExtensions()后，以下情况都将被禁止：</span>
<span class="token keyword">var</span> empty <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">isFrozen</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">true</span>
Object<span class="token punctuation">.</span><span class="token function">isSealed</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">true</span>
Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>总结</strong></p> <ul><li><code>Object.preventExtensions(obj)</code> ：用于锁住对象属性，使其不能够拓展，也就是不能增加新的属性，但是属性的值仍然可以更改，也可以把属性删除。</li> <li><code>Object.seal(obj)</code> ：把对象密封，也就是让对象既不可以拓展也不可以删除属性（把每个属性的 <code>configurable</code> 设为 false），单数属性值仍然可以修改。</li> <li><code>Object.freeze(obj)</code> ：完全冻结对象，在 seal 的基础上，属性值也不可以修改（每个属性的 <code>writable</code> 也被设为 false）。</li></ul> <h4 id="object-create-方法创建一个新对象-使用现有的对象来提供新创建的对象的-proto"><a href="#object-create-方法创建一个新对象-使用现有的对象来提供新创建的对象的-proto" class="header-anchor">#</a> Object.create()方法创建一个新对象，使用现有的对象来提供新创建的对象的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener noreferrer"><code>__proto__</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 创建一个原型为null的空对象</span>
<span class="token keyword">var</span> pureObj  <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// 或者</span>
<span class="token keyword">var</span> atom <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>pureObj其实是个原子（原子是JavaScript中的对象的最小单元，它是对象但不继承自Object()；以原子为原型的对象也会被称为原子对象。）在同一个运行环境中，可以并存多个原子，以及由原型指向原子的、原型继承的对象系统。所有这些原子以及衍生的对象系统都是互不相等、没有交集的。</p> <h3 id="九种常用的设计模式"><a href="#九种常用的设计模式" class="header-anchor">#</a> <a href="https://juejin.cn/post/6881384600758091784" target="_blank" rel="noopener noreferrer">九种常用的设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="设计模式"><a href="#设计模式" class="header-anchor">#</a> <a href="https://juejin.im/post/6846687601785585677" target="_blank" rel="noopener noreferrer">设计模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <h3 id="前端模块化"><a href="#前端模块化" class="header-anchor">#</a> <a href="https://juejin.im/post/6844903744518389768" target="_blank" rel="noopener noreferrer">前端模块化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p><a href="https://juejin.im/post/6844903576309858318" target="_blank" rel="noopener noreferrer">文章1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/leelxp/article/details/108101442" target="_blank" rel="noopener noreferrer">文章2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="es6-模块与-commonjs-模块的差异"><a href="#es6-模块与-commonjs-模块的差异" class="header-anchor">#</a> <a href="https://es6.ruanyifeng.com/#docs/module-loader#ES6-%E6%A8%A1%E5%9D%97%E4%B8%8E-CommonJS-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%B7%AE%E5%BC%82" target="_blank" rel="noopener noreferrer">ES6 模块与 CommonJS 模块的差异<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <ul><li>CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</li> <li>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。</li> <li>CommonJS 模块的require()是同步加载模块，ES6 模块的import命令是异步加载，有一个独立的模块依赖的解析阶段。</li> <li>CommonJS 模块处理循环加载的方法是返回的是当前已经执行的部分的值，而不是代码全部执行后的值，两者可能会有差异。因为CommonJS 输入的是被输出值的拷贝，不是引用,只会在第一次加载时运行一次，以后再加载，就返回第一次运行的结果，除非手动清除系统缓存。</li></ul> <blockquote><p>AMD(require.js) 推崇依赖前置、提前执行，CMD(sea.js)推崇依赖就近、延迟执行。</p></blockquote> <h3 id="javascript-number类型"><a href="#javascript-number类型" class="header-anchor">#</a> JavaScript Number类型</h3> <p>文章<a href="https://github.com/mqyqingfeng/Blog/issues/155" target="_blank" rel="noopener noreferrer">JavaScript 深入之浮点数精度<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>在 JavaScript 里面，数字均为双精度浮点类型（double-precision 64-bit binary format IEEE 754），即一个介于±2−1023和±2+1024之间的数字，或约为±10−308到±10+308，数字精度为53位。整数数值仅在±(253 - 1)的范围内可以表示准确。</p> <p>除了能够表示浮点数，数字类型也还能表示三种符号值: +Infinity（正无穷）、-Infinity（负无穷）和 NaN (not-a-number，非数字)</p> <h4 id="浮点数的组成"><a href="#浮点数的组成" class="header-anchor">#</a> 浮点数的组成</h4> <p>EEE 754 规定了包括：单精度（32位）、双精度（64位）、延伸单精度（43比特以上，很少使用）与延伸双精度（79比特以上，通常以80位实现）。而 JavaScript 使用的是双精度。</p> <p>一个浮点数(value)可以这样表示：
<img src="data:image/png;base64,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" alt="An image">
也就是浮点数的实际值，等于符号位（sign bit）乘以指数偏移值(exponent bias)再乘以分数值(fraction)。</p> <p>64 位双精度浮点型具体的字节分配：
<img src="data:image/png;base64,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" alt="An image">
从上图中可以看到，从高到低，64位被分成3段，分别是:</p> <ol><li>符号位（sign），只占 1 位，0 表示+，1 表示-。</li> <li>指数位（exponent），占 11 位(取值范围 <code>[0, 2048)</code>)，记为 e。</li> <li>分数位（fraction），有效数字位，占 52 位。</li></ol> <p>指数位有 11 位，取值范围是 0 到 2047。当指数位 e=0 或者 e=2017 时，根据有效数字位 f 是否为 0 ，具有不同的特殊含义，具体见下表：</p> <p><img src="/assets/img/4.86839e50.png" alt="An image"></p> <p>对于常用的 normal number, 为了方便表示指数为负数的情况，所以，指数位数值大小做了一个 -1023 的偏移量。对于一个非 0 数字而言，,它的二进制的科学计数法里的第一位有效数字固定是 1。这样，一个双精度浮点型数字的值就是</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAU8AAABACAYAAACa7PWTAAAYeUlEQVR4nO2dBdBU1RvGj/W3u7sVFQs7sUUdscYWHRvHRBhBR8UEVMbCAmPsxE7sxE6wxQ5UxO64//s78z07L5e7+2197H587zOzs7t37z33xHve87xx7k6RpAgOh8PhqAhTNroCDofD0R7hytPhcDiqgCtPh8PhqAKuPB0Oh6MKuPJ0OByOKuDK0+FwOKqAK0+Hw+GoAq48HQ6Howq48nQ4HI4q4MrT4ejA8A2G1aPDK8///vsvvv/+++8NronDMenw559/xneU52+//Rbf//777/Djjz8WvYbfBa4Bf/zxxwTncPyvv/5qgxo3H6boqHvbaTaKc6qppmp0VRyOhoF5gLKbcsopwzTTTFM4ztyYYoop4qvUtf/8888E13Gs1DWTEzos82SAUZyspv/++298ORwdBZJ75sG0005bUIBikijTX3/9tXA+jDTLs7jWKk4dEyZ3XjZ1oyvQaLzzzjvhhhtuCCeeeGIUmI6yajraF+rB6DDVUZQozjfffDMqvuWWWy7KPfj222/DFVdcEeaYY44wbty4sN9++4WZZpop/oZb67TTTgtff/11WHPNNeNvM8wwQ/j+++/Do48+Gr755pvwwQcfhM033zxssskm4X//+99kP5faPfPM+lws5M8EmCaWXSIMHFtggQXigE833XTRBBGyq6Z8Qnn3L8Za6+37aeuVXOXTb7bvGgX6Vr45i3LrRv8XO7eU3DQDfvnllwm+2zGx41QJUJxPPfVUOPXUU8PFF18c3n///ag4KYf+uPXWW8O2224bDjzwwLD99tuHBx54oHCPhx9+OJx55pnhwgsvDF988UW49NJLY/9+8sknUYEefPDBoV+/fmH48OHhww8/rEMPND/avfJkdSsmRFpRASuh9W9OP/308Rir7MYbbxwFkpVYgqlVk7KZwCjbrGkDULql/KZ5k7/ZQJvFbHin3+xC0ijIpGTRsv1ox7U1cK5d9KRQGbdmhhifoDZTf8kmxyp1OW2wwQahf//+YZVVVpmg7PHjx4cxY8aE2WabLcoApOLll1+ObPS9994r3HfmmWcOW221VXjllVfCzz//HH976KGHwpdffhnnB+P07rvv1qEHmh91VZ5awVjV3nrrrXoWXRRMrldffTU88cQTE63WeeyCiSRl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" alt="An image"></p> <p>对于 subnormal number,它可以用来表示更加接近于 0 的数，它特殊的地方是有效数字位的前面补充的是 0 而不是 1，且指数为偏移量是 -1022，所以值是：</p> <p><img src="data:image/png;base64,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" alt="An image"></p> <p><img src="/assets/img/7.6689bbce.png" alt="An image"></p> <p>双精度浮点数(double)转化为十进制的公式：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAacAAABYCAYAAABRXDjgAAAYAUlEQVR4Ae2d2asdRRfF8w/4+j355IMPPvggCAERRBARkSASCaJEFCWKBgeMRoyJQ5yH4JxBgwMavOq9DgQkETUqRmPEMQlqHK5D1DhrnKL2x69wt3Xqdvfp8Zzuc9aGc/t2d3V11arqvap27aqaFUmEgBDoDAJ79+6Nli9fHm3fvr0zaVZChUAZBGaVeUjPCAEhIASEgBBoEgGRU5PoKm4hIASEgBAohYDIqRRsekgICAEhIASaREDk1CS6ilsICAEhIARKISByKgWbHhICQkAICIEmERA5NYmu4hYCQkAICIFSCIicSsGmh4SAEBACQqBJBEROTaKruIWAEBACQqAUAiKnUrDpISEgBJIQ2LFjRzQ5Oel+ExMT0fXXX98T7K+//orWrVsXffXVVz3XdSIEQgRETiEiOhcCQqA0ArNnz45mzZoV/+6///44rqmpqejAAw9097Zt2xZf1z9CIAkBkVMSKromBIRAYQQ2bdoUzZ8/P9qzZ4/7/frrrz1xfP755xG9KchL5NQDjU4SEBA5JYCiS0JACBRH4JhjjnE9o6VLl0bvvPNOYgTr168XOSUio4shAiKnEBGdCwEhUBgBeklHH3109L///S826d13330z4hE5zYBEF1IQEDmlAKPLQkAIlEPg+eefj/bff39HUmEPSuRUDtNxfErkNI6lrjwLgYYRmJ6ejvbZZ59oxYoVPW8SOfXAoZMMBEROGeDolhAQAuURwMx39tln90QgcuqBQycZCIicMsDRLSEgBMojcMABB0R33HFHTwQipx44dJKBgMgpAxzdEgJCIB8CX3zxRXTXXXdFP//8s3tg8+bNzjni22+/7YngwQcfdGNRb775Zs91nQiBEAGRU4iIzoWAECiMwJo1axzpMM508sknR8cee2z03nvv9cTDhFxzlDjyyCOjDRs29NzXiRDwERA5+WjofyEgBEoj8Ntvv0XvvvtutHv37tJx6EEhYAiInAwJHYWAEBACQqA1CIicWlMUSogQEAJCQAgYAiInQ0JHISAEUhHYu3dvNGfOnOioo44a6O/7779PTZNujDYCIqfRLl/lTgjUhsBtt90WL03krzze5P9ff/11belXRN1CQOTUrfJSaoXA0BD4+++/3fp5TZJRGLfIaWjFPfQX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" alt="An image"></p> <p>其中，b 为二进制小数的第 52 - i 位的值。e 需减去取值范围的中位数 1023。特别的，当 e 等于 0 且小数位均为 0 时，表示 0，当 e 全为 1 且小数位均为 0 时，表示无穷，如果 e 全为 1 且小数位不均为 0 ，那么这不是一个数（NaN）。</p> <p>对于 0.1 来说，转成二进制小数为：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0.1</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;0.0001100110011001100110011001100110011001100110011001101&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>用科学计数法表示：<code>1.100110011001100110011001100110011001100110011001101 x 2^-4</code>，指数为 -4，因此 e 等于 1019，
转成 11 位二进制数 <code>01111111011</code>；尾数为 <code>1001100110011001100110011001100110011001100110011010</code>，末尾补齐 0 至 52 位数；正负号标志 s 显然是 0。最终 0.1 在内存中长这样 <code>0011111110111001100110011001100110011001100110011001100110011010</code>，图形化显示为：</p> <p><img src="/assets/img/8.e823b834.png" alt="An image"></p> <p>小数位其实是 1001 无限循环，根据 IEEE754 的舍入标准 进行了舍入，导致结果会比 0.1 大那么一点点，之所以使用的时候没感觉出来，是因为打印结果的时候舍入了小数点后第 18 位的值。Number 对象里有 toPrecision 方法来指定精度</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0.1</span><span class="token punctuation">.</span><span class="token function">toPrecistion</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;0.10000000000000000555&quot;</span>
<span class="token number">0.2</span><span class="token punctuation">.</span><span class="token function">toPrecistion</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;0.20000000000000001110&quot;</span>
<span class="token number">0.3</span><span class="token punctuation">.</span><span class="token function">toPrecistion</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;0.29999999999999998890&quot;</span>
<span class="token comment">// https://blog.csdn.net/a76326791212/article/details/109125123</span>
<span class="token comment">// https://juejin.im/post/6844903747345235982</span>
<span class="token comment">// https://juejin.im/post/6844903859962249229</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="/assets/img/9.5c39b0c7.png" alt="An image"></p> <h4 id="解决方法"><a href="#解决方法" class="header-anchor">#</a> 解决方法</h4> <ul><li>只需要展示的话，可以 toFixed 或者 toPrecision 选择自己需要的精度，然后再 parseFloat 转成浮点数。需要注意的是，这两个方法均不是四舍五入法，而是上面提过的 IEEE754舍入标准，舍入至最接近的值，如果有 2 个值一样接近，则取偶数值。</li> <li>如需对数据进行运算，那么一种常用的方法就是，把小数转成整数再进行运算，只要运算过程涉及到的数字不大于 MAX_SAFE_INTEGER ，得到的结果就是“精确”的。</li> <li>使用<code>Number.EPSILON</code></li></ul> <h5 id="tofixed"><a href="#tofixed" class="header-anchor">#</a> toFixed</h5> <p>toFixed有四舍五入，部分场景会出bug</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.54</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// '1.5'</span>
<span class="token number">1.55</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// '1.6'</span>
<span class="token number">1.64</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// '1.6'</span>
<span class="token number">1.65</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// '1.6'</span>
<span class="token number">1.66</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// '1.7'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>toFixed因为舍入的规则是银行家舍入法：四舍六入五考虑，五后非零就进一，五后为零看奇偶，五前为偶应舍去，五前为奇要进一</p> <p>主要是小数实际储存的值和显示的值不同，比如1.65的实际值是1.649...所以toFixed(1)的结果是1.6</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> s</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> times <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
    <span class="token keyword">let</span> des <span class="token operator">=</span> num <span class="token operator">*</span> times <span class="token operator">+</span> <span class="token number">0.5</span>
    des <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>des<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">/</span> times
    <span class="token keyword">return</span> des <span class="token operator">+</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>实际上比如2.55存的是2.5499999999999998，给他加上一个很小的数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>_toFixed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>_toFixed <span class="token operator">=</span> <span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toFixed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toFixed</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">+</span> <span class="token number">1e-14</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">_toFixed</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="number-epsilon"><a href="#number-epsilon" class="header-anchor">#</a> <code>Number.EPSILON</code></h5> <p><code>Number.EPSILON</code> 属性表示 1 与Number可表示的大于 1 的最小的浮点数之间的差值。<code>EPSILON</code> 属性的值接近于 <code>2.2204460492503130808472633361816E-16</code>，或者 2<sup>-52</sup>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>x <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>
z <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>
equal <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>x <span class="token operator">-</span> y <span class="token operator">+</span> z<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Polyfill</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="尾递归优化"><a href="#尾递归优化" class="header-anchor">#</a> 尾递归优化</h3> <p>ECMAScript 6 规范新增了一项内存管理优化机制，让 JavaScript 引擎在满足条件时可以重用栈帧。</p> <p>其实就是在严格模式下，一个函数最后返回另一个函数的返回结果，少一次栈的叠加</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 尾调用</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> n
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 斐波纳契数列尾递归优化</span>
<span class="token comment">// 基础框架</span>
<span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 执行递归</span>
<span class="token keyword">function</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> a
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>尾调用优化的条件就是确定外部栈帧真的没有必要存在了。涉及的条件如下：</p> <ul><li>代码在严格模式下执行；</li> <li>外部函数的返回值是对尾调用函数的调用；</li> <li>尾调用函数返回后不需要执行额外的逻辑；</li> <li>尾调用函数不是引用外部函数作用域中自由变量的闭包。</li></ul> <h3 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h3> <blockquote><p>闭包指的是那些引用了另一个函数作用域中变量的函数，通常是在嵌套函数中实现的。</p></blockquote> <blockquote><p>《你不知道的JavaScript》这样描述：当函数可以记住并访问所在的词法作用域时，就产生了闭包，即使函数是在当前词法作用域之外执行。</p></blockquote> <p><a href="https://zh.javascript.info/closure" target="_blank" rel="noopener noreferrer">变量作用域，闭包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>从词法作用域讲解闭包：</p> <ul><li><p><a href="https://juejin.cn/post/6844903606311714824" target="_blank" rel="noopener noreferrer">深入理解闭包之前置知识→作用域与词法作用域<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/post/6844903612879994887" target="_blank" rel="noopener noreferrer">闭包详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/post/6844903769646317576" target="_blank" rel="noopener noreferrer">[译]发现 JavaScript 中闭包的强大威力<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://juejin.cn/post/6844903474212143117" target="_blank" rel="noopener noreferrer">破解前端面试（80% 应聘者不及格系列）：从闭包说起<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <p>闭包的定义很简单：函数 A 返回了一个函数 B，并且函数 B 中使用了函数 A 的变量，函数 B 就被称为闭包。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token constant">B</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>你是否会疑惑，为什么函数 A 已经弹出调用栈了，为什么函数 B 还能引用到函数 A 中的变量。因为函数 A 中的变量这时候是存储在堆上的。现在的 JS 引擎可以通过逃逸分析辨别出哪些变量需要存储在堆上，哪些需要存储在栈上。</p> <p>经典面试题，循环中使用闭包解决 <code>var</code> 定义函数的问题</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>首先因为 <code>setTimeout</code> 是个异步函数，所有会先把循环全部执行完毕，这时候 <code>i</code> 就是 6 了，所以会输出一堆 6。</p> <p>解决办法两种，第一种使用闭包</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> j <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>第二种就是使用 <code>setTimeout</code>  的第三个参数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> j <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>第三种就是使用 <code>let</code> 定义  <code>i</code> 了</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>因为对于 <code>let</code> 来说，他会创建一个块级作用域，相当于</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token comment">// 形成块级作用域</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ii <span class="token operator">=</span> i
    <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> ii <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  i<span class="token operator">++</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ii <span class="token operator">=</span> i
  <span class="token punctuation">}</span>
  i<span class="token operator">++</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ii <span class="token operator">=</span> i
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意： 除了抛出异常以外，没有办法中止或跳出 forEach() 循环。如果你需要中止或跳出循环，forEach() 方法不是应当使用的工具。</p> <p>若需要提前终止循环，可以使用：</p> <ul><li>一个简单的 for 循环</li> <li>for...of / for...in 循环</li> <li>Array.prototype.every()</li> <li>Array.prototype.some()</li> <li>Array.prototype.find()</li> <li>Array.prototype.findIndex()</li></ul></div> <p>如果数组在forEach迭代时被修改了，则其他元素会被跳过。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
words<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>word <span class="token operator">===</span> <span class="token string">'two'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    words<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// one</span>
<span class="token comment">// two</span>
<span class="token comment">// four</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="foreach-与async"><a href="#foreach-与async" class="header-anchor">#</a> forEach 与async</h4> <p>问题描述</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">getNumbers</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">multi</span> <span class="token operator">=</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">resolve</span><span class="token punctuation">(</span>num <span class="token operator">*</span> num<span class="token punctuation">)</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
       <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'num not specified'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 nums<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">multi</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>代码执行的结果是：1 秒后，一次性输出1，4，9。</p> <p>解决问题</p> <p>方式一</p> <p>可以改造一下 forEach，确保每一个异步的回调执行完成后，才执行下一个</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncForEach</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">callback</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">asyncForEach</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">multi</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>方式二</p> <p>使用 <code>for-of</code> 替代 <code>for-each</code>。</p> <p><code>for-of</code> 可以遍历各种集合对象的属性值，要求被遍历的对象需要实现迭代器 (iterator) 方法，例如<code>myObject[Symbol.iterator]()</code> 用于告知 JS 引擎如何遍历该对象。一个拥有 <code>[Symbol.iterator]()</code>方法的对象被认为是可遍历的。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> zeroesForeverIterator <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如上就是一个最简单的迭代器对象；for-of 遍历对象时，先调用遍历对象的迭代器方法 <code>[Symbol.iterator]()</code>，该方法返回一个迭代器对象(迭代器对象中包含一个 next 方法)；然后调用该迭代器对象上的 next 方法。</p> <p>每次调用 next 方法都返回一个对象，其中 done 和 value 属性用来表示遍历是否结束和当前遍历的属性值，当 done 的值为 true 时，遍历就停止了。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> nums <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token keyword">of</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">multi</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>文章<a href="https://objcer.com/2017/10/12/async-await-with-forEach/" target="_blank" rel="noopener noreferrer">当 async/await 遇上 forEach<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="for-in-和for-of"><a href="#for-in-和for-of" class="header-anchor">#</a> for in 和for of</h4> <h5 id="for-in"><a href="#for-in" class="header-anchor">#</a> for in</h5> <ul><li>for ... in 循环返回的值都是返回的是所有能够通过对象访问的、可枚举的属性，其中既包括存在于实例中的属性，也包括存在于原型中的属性。</li> <li>数组的键名是数字，但是for...in循环是以字符串作为键名“0”、“1”、“2”等等</li> <li>特别情况下, for ... in 循环会以任意的顺序遍历键名</li></ul> <p>对象中的属性可分为<code>常规属性</code>和 <code>排序属性</code></p> <p>例子</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test-100'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test-1'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'bar-B'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test-50'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test-9'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test-8'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test-3'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test-5'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'bar-A'</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'bar-C'</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> bar<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">index:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> value:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bar<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出是</span>
<span class="token comment">/**
index:1 value:test-1
index:3 value:test-3
index:5 value:test-5
index:8 value:test-8
index:9 value:test-9
index:50 value:test-50
index:100 value:test-100
index:B value:bar-B
index:A value:bar-A
index:C value:bar-C
**/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>在ECMAScript规范中定义了 「数字属性应该按照索引值⼤⼩升序排列，字符 串属性根据创建时的顺序升序排列。」在这⾥我们把对象中的数字属性称为 「排序属性」，在V8中被称为 elements，字符串属性就被称为 「常规属性」， 在V8中被称为 properties。在V8内部，为了有效地提升存储和访问这两种属性的性能，分别使⽤了两个 线性数据结构来分别保存排序 属性和常规属性，具体结构如下图所⽰：</p> <p><img src="/assets/img/v8_obj_save.2a007031.png" alt="">
在elements对象中，会按照顺序存放排序属性，properties属性则指向了properties对 象，在properties对象中，会按照创建时的顺序保存了常规属性。</p> <p><strong>总结一句: for in 循环特别适合遍历对象。</strong></p> <h5 id="for-of-特点"><a href="#for-of-特点" class="header-anchor">#</a> for of 特点</h5> <ul><li><p>for of 不同与 forEach, 它可以与 break、continue和return 配合使用,也就是说 for of 循环可以随时退出循环。</p></li> <li><p>提供了遍历所有数据结构的统一接口</p></li> <li><p>遍历数组无法获取index，但可以转成<code>Map</code>，示例如下</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>哪些数据结构部署了 <code>Symbol.iterator</code> 属性呢?只要有 <code>iterator</code>接口的数据结构,都可以使用 for of循环。</p> <ul><li>数组 Array</li> <li>Map</li> <li>Set</li> <li>String</li> <li>arguments对象</li> <li>NodeList对象, 就是获取的dom列表集合</li></ul> <p>以上这些都可以直接使用 for of 循环。 凡是部署了 iterator 接口的数据结构也都可以使用数组的 扩展运算符(...)、和解构赋值等操作。</p> <h3 id="promise"><a href="#promise" class="header-anchor">#</a> promise</h3> <ul><li><code>Promise.prototype.then()</code>: then方法的第一个参数是resolved状态的回调函数，第二个参数是rejected状态的回调函数，它们都是可选的。</li> <li><code>Promise.prototype.catch()</code>方法是<code>.then(null, rejection)</code>或<code>.then(undefined, rejection)</code>的别名，用于指定发生错误时的回调函数。</li> <li><code>Promise.all()</code>: 所有的状态都变成<code>fulfilled</code>才会变成<code>fulfilled</code>,只要p1、p2、p3之中有一个被<code>rejected</code>，p的状态就变成<code>rejected</code>，此时第一个被reject的实例的返回值，会传递给p的回调函数。</li> <li><code>Promise.race()</code>: 只要p1、p2、p3之中有一个实例率先改变状态，p的状态就跟着改变。那个率先改变的 Promise 实例的返回值，就传递给p的回调函数。</li> <li><code>Promise.allSettled()</code>: 方法接受一组 Promise 实例作为参数，包装成一个新的 Promise 实例。只有等到所有这些参数实例都返回结果，不管是fulfilled还是rejected，包装实例才会结束。该方法返回的新的 Promise 实例，一旦结束，状态总是fulfilled，不会变成rejected。状态变成fulfilled后，Promise 的监听函数接收到的参数是一个数组，每个成员对应一个传入Promise.allSettled()的 Promise 实例。</li></ul> <h3 id="async的实现"><a href="#async的实现" class="header-anchor">#</a> async的实现</h3> <p>async 函数的实现原理，就是将 <code>Generator</code> 函数和自动执行器，包装在一个函数里。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 等同于</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>所有的<code>async</code>函数都可以写成上面的第二种形式，其中的<code>spawn</code>函数就是自动执行器。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token parameter">genF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token function">genF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">nextF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> next<span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        next <span class="token operator">=</span> <span class="token function">nextF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span>ms<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncPrint</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">await</span> <span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">yield</span> <span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// asyncPrint('hello world', 2000);</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>version2</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myCo</span><span class="token punctuation">(</span><span class="token parameter">gen</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">//done为true,表示迭代完成</span>
				<span class="token comment">//value 不一定是 Promise，可能是一个普通值。使用 Promise.resolve 进行包装。</span>
				Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">next</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//第一次调用next函数时，传递的参数无效</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">yield</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">yield</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// throw Error(1);</span>
		<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">yield</span> <span class="token number">10</span>
	<span class="token keyword">return</span> <span class="token number">1000</span>
<span class="token punctuation">}</span>

<span class="token function">myCo</span><span class="token punctuation">(</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">//输出1000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err: '</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h4 id="reduce"><a href="#reduce" class="header-anchor">#</a> reduce</h4> <h4 id="json-stringify、json-parse深拷贝的缺点"><a href="#json-stringify、json-parse深拷贝的缺点" class="header-anchor">#</a> <code>JSON.stringify</code>、<code>JSON.parse</code>深拷贝的缺点</h4> <ul><li><ol><li>如果obj里有函数，undefined，则序列化的结果会把函数或 <code>undefined</code>丢失；<code>JSON.parse</code>传入<code>undefined</code>会报错, <code>JSON.stringify</code>不会报错。有NaN、Infinity和-Infinity，则序列化的结果会变成null。如果obj里有RegExp(正则表达式的缩写)、Error对象，则序列化的结果将只得到空对象null；</li></ol></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> funObj <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
	<span class="token function-variable function">fun</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	un<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
	na<span class="token operator">:</span> <span class="token number">NaN</span><span class="token punctuation">,</span>
	<span class="token keyword">in</span><span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
	una<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>funObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { name: 'a', na: null, in: null, una: null }</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
	reg<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\w+'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	error<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { name: 'a', reg: {}, error: {} }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li><ol start="2"><li>JSON.stringify()只能序列化对象的可枚举的自有属性，例如 如果obj中的对象是由构造函数生成的， 则使用JSON.parse(JSON.stringify(obj))深拷贝后，会丢弃对象的constructor；</li></ol></li> <li><ol start="3"><li>如果对象中存在循环引用的情况也无法正确实现深拷贝；</li></ol></li> <li><ol start="4"><li>如果obj里面有时间对象，则JSON.stringify后再JSON.parse的结果，时间将只是字符串的形式，而不是对象的形式</li></ol></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
	date<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1536627600000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1540047600000</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">// 	name: 'a',</span>
<span class="token comment">// 		date: [ '2018-09-11T01:00:00.000Z', '2018-10-20T15:00:00.000Z' ]</span>
<span class="token comment">// }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="垃圾回收"><a href="#垃圾回收" class="header-anchor">#</a> <a href="https://zh.javascript.info/garbage-collection" target="_blank" rel="noopener noreferrer">垃圾回收<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/11/2021, 12:24:00 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe/" class="prev router-link-active">
        LearnAndNoteList
      </a></span> <span class="next"><a href="/fe/achieve.html">
        手写实现
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.29d4c536.js" defer></script><script src="/assets/js/2.609aed4b.js" defer></script><script src="/assets/js/6.80030cb0.js" defer></script>
  </body>
</html>
