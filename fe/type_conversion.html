<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>类型转换 | Sysuke&#39; NoteBook</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="person NoteBook power by VuePress & GitHub Page">
    
    <link rel="preload" href="/assets/css/0.styles.51f546be.css" as="style"><link rel="preload" href="/assets/js/app.8a524e1d.js" as="script"><link rel="preload" href="/assets/js/2.d1d9ac8d.js" as="script"><link rel="preload" href="/assets/js/19.2476f38a.js" as="script"><link rel="prefetch" href="/assets/js/10.7b65e50d.js"><link rel="prefetch" href="/assets/js/11.94ae314f.js"><link rel="prefetch" href="/assets/js/12.f29d46d5.js"><link rel="prefetch" href="/assets/js/13.edbebbde.js"><link rel="prefetch" href="/assets/js/14.3b2a7030.js"><link rel="prefetch" href="/assets/js/15.1a15890b.js"><link rel="prefetch" href="/assets/js/16.4a2c0765.js"><link rel="prefetch" href="/assets/js/17.4ad34b5b.js"><link rel="prefetch" href="/assets/js/18.58c7d1db.js"><link rel="prefetch" href="/assets/js/20.fd0e1cfc.js"><link rel="prefetch" href="/assets/js/21.67a5069a.js"><link rel="prefetch" href="/assets/js/22.65035d2d.js"><link rel="prefetch" href="/assets/js/23.3810567b.js"><link rel="prefetch" href="/assets/js/24.5c13836d.js"><link rel="prefetch" href="/assets/js/25.d785a9d9.js"><link rel="prefetch" href="/assets/js/26.cd66f359.js"><link rel="prefetch" href="/assets/js/27.12e2a79f.js"><link rel="prefetch" href="/assets/js/28.ed96c93d.js"><link rel="prefetch" href="/assets/js/29.18fa9ceb.js"><link rel="prefetch" href="/assets/js/3.e7a2eef1.js"><link rel="prefetch" href="/assets/js/30.29fb5c86.js"><link rel="prefetch" href="/assets/js/31.3e393e34.js"><link rel="prefetch" href="/assets/js/32.1034979a.js"><link rel="prefetch" href="/assets/js/33.868831b0.js"><link rel="prefetch" href="/assets/js/34.7ae15041.js"><link rel="prefetch" href="/assets/js/35.8872f150.js"><link rel="prefetch" href="/assets/js/36.e9749416.js"><link rel="prefetch" href="/assets/js/37.9ef1e45e.js"><link rel="prefetch" href="/assets/js/38.e5b8598e.js"><link rel="prefetch" href="/assets/js/39.954ca7db.js"><link rel="prefetch" href="/assets/js/4.caddfb66.js"><link rel="prefetch" href="/assets/js/40.2456057a.js"><link rel="prefetch" href="/assets/js/41.e16ec2f8.js"><link rel="prefetch" href="/assets/js/42.bfdd9b34.js"><link rel="prefetch" href="/assets/js/43.3166dc46.js"><link rel="prefetch" href="/assets/js/44.f70a887a.js"><link rel="prefetch" href="/assets/js/45.861cca7a.js"><link rel="prefetch" href="/assets/js/46.31813776.js"><link rel="prefetch" href="/assets/js/47.65164663.js"><link rel="prefetch" href="/assets/js/48.7469e291.js"><link rel="prefetch" href="/assets/js/49.5f174526.js"><link rel="prefetch" href="/assets/js/5.d6f7a93d.js"><link rel="prefetch" href="/assets/js/50.b94f79b4.js"><link rel="prefetch" href="/assets/js/51.e297671a.js"><link rel="prefetch" href="/assets/js/52.a269fde0.js"><link rel="prefetch" href="/assets/js/53.f97f71dd.js"><link rel="prefetch" href="/assets/js/54.b5633bd5.js"><link rel="prefetch" href="/assets/js/55.1bec27d8.js"><link rel="prefetch" href="/assets/js/56.9108075e.js"><link rel="prefetch" href="/assets/js/57.a7f5b861.js"><link rel="prefetch" href="/assets/js/58.916f837b.js"><link rel="prefetch" href="/assets/js/59.9e7d86e0.js"><link rel="prefetch" href="/assets/js/6.cebd9d13.js"><link rel="prefetch" href="/assets/js/7.625974be.js"><link rel="prefetch" href="/assets/js/8.7300bebe.js"><link rel="prefetch" href="/assets/js/9.034d71da.js">
    <link rel="stylesheet" href="/assets/css/0.styles.51f546be.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sysuke' NoteBook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  algorithm
</a></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  Demo
</a></div><div class="nav-item"><a href="/resume.html" class="nav-link">
  Resume
</a></div><div class="nav-item"><a href="https://github.com/qinsong77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/fe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  algorithm
</a></div><div class="nav-item"><a href="/backEnd/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/demo.html" class="nav-link">
  Demo
</a></div><div class="nav-item"><a href="/resume.html" class="nav-link">
  Resume
</a></div><div class="nav-item"><a href="https://github.com/qinsong77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/" aria-current="page" class="sidebar-link">LearnAndNoteList</a></li><li><a href="/fe/learn.html" class="sidebar-link">学习笔记</a></li><li><a href="/fe/achieve.html" class="sidebar-link">手写实现</a></li><li><a href="/fe/prototype.html" class="sidebar-link">原型、原型链、继承</a></li><li><a href="/fe/extend.html" class="sidebar-link">继承</a></li><li><a href="/fe/var_type.html" class="sidebar-link">变量和类型</a></li><li><a href="/fe/type_conversion.html" aria-current="page" class="active sidebar-link">类型转换</a></li><li><a href="/fe/context_execution_stack_this.html" class="sidebar-link">执行上下文、执行栈、this</a></li><li><a href="/fe/event_loop.html" class="sidebar-link">事件循环</a></li><li><a href="/fe/alwaysNote.html" class="sidebar-link">常用笔记</a></li><li><a href="/fe/noteForJavascriptCore.html" class="sidebar-link">JavaScript核心技术开发解密笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/vue/" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/vue/" class="sidebar-link">原理</a></li><li><a href="/fe/vue/alwaysNote.html" class="sidebar-link">常用笔记vue</a></li><li><a href="/fe/vue/vue3.html" class="sidebar-link">Vue 3.0</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/react/" class="sidebar-heading clickable"><span>React</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/react/" class="sidebar-link">总结</a></li><li><a href="/fe/react/react_hooks.html" class="sidebar-link">React Hooks</a></li><li><a href="/fe/react/typescript.html" class="sidebar-link">Typescript</a></li><li><a href="/fe/react/build_mini_react.html" class="sidebar-link">构建你自己的 React 框架</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/css/" class="sidebar-heading clickable"><span>CSS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/css/" class="sidebar-link">Summary</a></li><li><a href="/fe/css/BFC.html" class="sidebar-link">BFC和清除浮动</a></li><li><a href="/fe/css/flex_grid.html" class="sidebar-link">flex和grid</a></li><li><a href="/fe/css/onepx.html" class="sidebar-link">1px及相关概念</a></li><li><a href="/fe/css/demo.html" class="sidebar-link">demo</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/dom/" class="sidebar-heading clickable"><span>Dom</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/dom/" class="sidebar-link">Summary</a></li><li><a href="/fe/dom/safety.html" class="sidebar-link">安全</a></li><li><a href="/fe/dom/canvas.html" class="sidebar-link">canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/webpack/" class="sidebar-heading clickable"><span>webpack</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/webpack/" class="sidebar-link">Summary</a></li><li><a href="/fe/webpack/webpack5.html" class="sidebar-link">Webpack5</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/fe/frameWork/" class="sidebar-heading clickable"><span>frameWork</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe/frameWork/" class="sidebar-link">Summary</a></li><li><a href="/fe/frameWork/microservices.html" class="sidebar-link">微前端</a></li><li><a href="/fe/frameWork/miniprogram.html" class="sidebar-link">小程序</a></li><li><a href="/fe/frameWork/ssr.html" class="sidebar-link">服务器渲染</a></li><li><a href="/fe/frameWork/network.html" class="sidebar-link">网络相关</a></li><li><a href="/fe/frameWork/http.html" class="sidebar-link">HTTP 协议总结</a></li><li><a href="/fe/frameWork/https.html" class="sidebar-link">HTTPS 协议总结</a></li><li><a href="/fe/frameWork/performance.html" class="sidebar-link">前端性能优化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><code>[] == ![]</code>    ??? the answer is true</p> <p>=== 不需要进行类型转换，只有类型相同并且值相等时，才返回 true.</p> <p>== 如果两者类型不同，首先需要进行类型转换。具体流程如下:</p> <ul><li><ol><li>首先判断两者类型是否相同，如果相等，判断值是否相等.</li></ol></li> <li><ol start="2"><li>如果类型不同，进行类型转换</li></ol></li> <li><ol start="3"><li>判断比较两者是否是 null 或者是 undefined, 如果是, 返回 true .（<code>undefined == null</code>为true，其他<code>undefined/null == any</code>都是false）</li></ol></li> <li><ol start="4"><li>判断两者类型是否为 string 和 number, 如果是, 将字符串转换成 number</li></ol></li> <li><ol start="5"><li>判断其中一方是否为 boolean, 如果是, 将 boolean 转为 number 再进行判断</li></ol></li> <li><ol start="6"><li>判断其中一方是否为 object 且另一方为 string、number 或者 symbol , 如果是, 将 object 转为原始类型再进行判断（即当原始类型和引用类型做比较时，对象类型会依照<code>ToPrimitive</code>规则转换为原始类型。</li></ol> <ul><li>引用类型转换为Number类型，先调用valueOf，再调用toString</li> <li>引用类型转换为String类型，先调用toString，再调用valueOf</li></ul></li> <li><ol start="7"><li><code>NaN</code>不等于任何值，包括自身</li></ol></li></ul> <p>[] == ![] 是true还是false？</p> <ul><li><ol><li>! 优先级是高于 ==</li></ol></li> <li><ol start="2"><li><code>![]</code>: 引用类型转换成布尔值都是true,因此<code>![]</code>的是false</li></ol></li> <li><ol start="3"><li>根据上面的比较步骤中的第五条，其中一方是 boolean，将 boolean 转为 number 再进行判断，false转换成 number，对应的值是 0.</li></ol></li> <li><ol start="4"><li>根据上面比较步骤中的第六条，有一方是 number，那么将object也转换成Number,空数组转换成数字，对应的值是0.(空数组转换成数字，对应的值是0，如果数组中只有一个数字，那么转成number就是这个数字，其它情况，均为<code>NaN</code>)</li></ol></li> <li>0 == 0; 为true</li></ul> <h3 id="js的基本数据类型"><a href="#js的基本数据类型" class="header-anchor">#</a> js的基本数据类型</h3> <p>基本数据类型一共6种，分别是number，undefined，symbol，null，string，boolean。</p> <ul><li>基本类型值是指简单的数据段，基本类型是按值访问的，因为可以操作保存在变量中的实际值;</li> <li>基本类型的值在内存中占据固定大小的空间，被保存在栈内存中。从一个变量向另一个变量复制基本类型的值，会创建这个值的一个副本。</li></ul> <h3 id="js的引用数据类型-object"><a href="#js的引用数据类型-object" class="header-anchor">#</a> js的引用数据类型：object</h3> <ul><li>引用类型是由多个值构成的对象，js不允许直接访问内存中的位置，也就是不能直接访问操作对象的内存空间。对object的操作时 实际上是在操作对象的引用而不是实际的对象。</li> <li>引用类型的值是对象，保存在堆内存中，包含引用类型值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针。从一个变量向另一个变量复制引用类型的值，复制的其实是指针，因此两个变量最终都指向同一个对象。</li> <li>对于引用类型的值，可以为其添加属性和方法，也可以改变和删除其属性和方法</li></ul> <h2 id="检测"><a href="#检测" class="header-anchor">#</a> 检测</h2> <ul><li>typeof 运算符</li> <li>instanceof 运算符</li> <li>Object.prototype.toString 方法</li></ul> <h2 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h2> <p>JS 的类型转换一共分两种：显示类型转换 和 隐式类型转换。在 JS 中类型转换只有三种情况，分别是：</p> <ul><li>转换为布尔值</li> <li>转换为数字</li> <li>转换为字符串</li></ul> <h3 id="转换关系图"><a href="#转换关系图" class="header-anchor">#</a> 转换关系图</h3> <p><img src="/assets/img/type_conversion.e31e4acc.png" alt="An image"></p> <h4 id="显式转换"><a href="#显式转换" class="header-anchor">#</a> 显式转换</h4> <ul><li>转化为 Number 类型：Number() / parseFloat() / parseInt()</li> <li>转化为 String 类型：String() / toString()</li> <li>转化为 Boolean 类型: Boolean()</li></ul> <p>有几个点需要注意:</p> <ul><li><p>Number类定义的toString()方法可以接受表示转换基数的可选参数，如果不指定此参数，转换规则将是基于十进进制。</p></li> <li><p>js中对象到字符串的转换经过了如下步骤：</p> <ul><li>如果对象具有toString()方法，则调用这个方法。如果它返回一个基本类型值，js将这个值转换为字符串，并返回这个字符串。</li> <li>如果对象没有toString()方法，或者这个方法返回的不是一个基本类型值，那么js将调用valueOf()方法。如果存在这个方法，则调用，如果返回值是基本类型值，转换为字符串并返回</li> <li>否则，js无法从toString()或valueOf()获得一个基本类型值，此时将会抛出类型错误异常</li></ul></li> <li><p>undefined、null、false、+0、-0、NaN、&quot;&quot;  只有这些 toBoolean()  是 false ，其余都为 true</p></li> <li><p>Number类定义的toString()方法可以接受表示转换基数的可选参数，如果不指定此参数，转换规则将是基于十进进制。</p></li></ul> <h5 id="隐性类型"><a href="#隐性类型" class="header-anchor">#</a> 隐性类型</h5> <ul><li>一元 +  运算符, 一元 -  运算符</li> <li>加法运算符</li> <li>==规则
<img src="/assets/img/bl_8_convert.5474c38e.png" alt="An image">
==规则</li> <li>如果存在NaN，一律返回false</li> <li>再看有没有布尔，有布尔就将布尔转换为数字</li> <li>接着看有没有字符串, 有三种情况，对方是对象，对象使用toString进行转换；对方是数字，字符串转数字；对方是字符串，直接比较；其他返回false</li> <li>如果是数字，对方是对象，对象取valueOf进行比较, 其他一律返回false</li> <li>null, undefined不会进行类型转换, 但它们俩相等</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>0 == undefined                       false
1 == true                            true
2 == {valueOf: function(){return 2}} true
NaN == NaN                           false
8 == undefined                       false
1 == undefined                       false
null == {toString: function(){return 2}}  false
0 == null   false
null == 1   false
{ toString:function(){ return 1 }, valueOf:function(){ return [] }} == 1   true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="对象转换为基本类型值"><a href="#对象转换为基本类型值" class="header-anchor">#</a> 对象转换为基本类型值</h4> <p>分为两种情况来处理。</p> <h5 id="_1-对象要被转换为字符串"><a href="#_1-对象要被转换为字符串" class="header-anchor">#</a> 1. 对象要被转换为字符串</h5> <p>转换步骤如下图所示。</p> <p><img src="/assets/img/obj_to_string.c4c185e2.png" alt="An image"></p> <p>举例如下</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 模拟 toString 返回的不是基本类型值</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token comment">// Uncaught TypeError: Cannot convert object to primitive value</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 模拟 toString 返回的不是基本类型值，valueOf 返回的基本类型值</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">valueOf</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>   <span class="token comment">// &quot;null&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 模拟 toString 返回的不是基本类型值，valueOf 返回的不是基本类型值</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">valueOf</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>   <span class="token comment">// Uncaught TypeError: Cannot convert object to primitive value</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="_2-对象要被转换为数字"><a href="#_2-对象要被转换为数字" class="header-anchor">#</a> 2. 对象要被转换为数字</h5> <p>和转换为字符串流程差不多，区别在于转换为数字先判断 valueOf 方法，再判断 toString 方法。举例如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">valueOf</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">toString</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">valueOf</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">toString</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token comment">// Uncaught TypeError: Cannot convert object to primitive value</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Object.create(null) 创建的对象没有 valueOf 和 toString 方法，因此转换时会报错。
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbcAAABDCAMAAAAoPbtiAAABdFBMVEX////89vv39/f29vb+8vP+8vL98vP/8PD97+/y8vL47Pb77Oz/5+fu7u7t7e326Ojs7Oz15+f/3t7/3d3m5ub/1tbx2O3/1NTg4ODc3Nz/zMzb29va2tr/ysr/ycn0w8rqw+Taz8/zw8nyvsPNzc3vvcD/tbXIyMj/qqrssrHpsK2/v7/orKf/oKDnqqXfotS1tbX/lJTnlp3ok5z/iYn/iIiqqqrXi8qtp6eoqKikpKT/fX2goKDSfsSfn5+inZ2hnJz/cHCemZmampqXl5fcenWWlpbOcb6VlZXcd3LwbHLwa3H/Y2PwaG7kbHjkbHfJYreJiYn/VVXfYWbeXmXuUlnDU7D/RkZ9fX1+fHzZVFXiTVraUlO9QajnPkjnPkfdQkfnPUX/NDTmPUbVRkLdQUbURkJwcHD/MzPrOUFvb29ubm7bPkHcPUHkNzzjNjzjNjrjNTpiYmLWMC61Kp3/HR1SUlJRUVH/AACrDZA9PT0iIiIc7/JGAAAI+ElEQVR42u2c+Z/bRhXAFQyoLBJQRBOoiwhHR6WwXQawONwFhquBujRSSW1oU8AcwoQzjVzZ/uf5vGOkGUne9Wa9bTee94OzkkZzfee9efNmFM9z4sSJEydOnDhx4sSJk4tLmm59sgyvugiQwWy4c9onT772GfMq2SReWNjdPpwNet5LiuZuutkUAy9LtnLrz6IrdRadIkhOVqvbnnfj7ur+EeT60ChnUCSHhO0jP/rZ58yueu/ObtzCh81gT5ahl2WtTr88N7OIWk5vw+/R3SMcIJlZxsPwkMB94oc//7zBLbszDIswTcEKDYuHyzubZDibbUCDss0Gbr8M/3hJZvd2WITZy+tN6oXLTZOaVPFTxWZDV6wZcJHMCkgHFwn+FoMEki1Db7jGHLCIo9NXVo9uejdfueGdnLS52SMsOyiF8wY/+OVzBrckbbitv1FkaTpcJzCy4V6RDIoMu8voJJxnBrNhVgxIReA5pdamztK3DAkm6yEkyhKtVzBBYa7weqLt7tH9E+/kdAs32zZa2ndw3AbZF2pus3A2TFPo9OGMlCbRzkAft6Tp+AGl1slMbqwkpLCgnZv1ELRzo7mh2tXc7h55t7dxs1UsyQ7ZTnrpt3q4JRkD6+FW28mEnwI3O9l2bnyxDBt90/1/PrcD9ijbfknmhVkRgllcm9yylM2Q7ipzcKNRQ7+EfAO0k/Q8ZTtJPsNwnYJxS40M2GgWg3CZ8pX2R2h+Y25vHt185Oa37euAzPOyZRguN7NG39abTUbuxLJWJMvZyzBBhhaPu5NS401AR14KckPbmGpucFEMBsVmeQcTwEsJGU0sgrl5p6v73zvxTler1aObR/dXq9XdG4ftTz6udBdXF/b6L1FEl9SBrd/2HsxItNa5eIkTJyzPOLmO4vlOrqM4bo6bE8fNya7cXvrLu+/+7ZuuR64Zt1/9d7FYLP73C9clLHIeXS4DYWYQzUVzEeRyX9xe/Pfi3mJxb/Gfr3fLV74f5ec3QnJllDBqW1VV1VtJfCR2rmeQV1UenJFglxp2JJ4E21rRw80q4vzyerjxS7txC/Jq+9DR3N5e3Hvq1Vefurf4ff3op09fmhsULvbRz0Guzkmxd27nFPFY5V3wpTOSa27/Wixe+/hHf71Y/LN+9OB3Xza5yVFZQedJGPg8/KX0g0nsi6qqyliO55XCv41xgtyk8v14qnOAd4WuE7yUB8FkBGoJT6S+5/uqUbB4iqnjEhOMMXWscECC4gpfQbENW0nVw19KLXn0KSwIy4PiDGsgsN7UCsgUGiFIyzEjqwh9IQ0zEKlJVca+mEC9WFuUqsbzPJBoW/glQa3kCgkjByVxLHEzqY9gbEnJvdbh9tfF4rWPAbc/Ntwe/OP7nzS4zaNoGvuiLkRK5ga3lfRliX/16BuUD6mhNQKeR9OY7SRYIyVAnaI8UhLT0z2Lm6iRwDhReRBPo7gUvpLwAhRrjU2qJPxKxamxixT1gC7P0jcYGiIPuJJ+/Vwq3eYefeMitC2UcEOUMWotplD5C6XAPww7WT8WShfR6D8pPDTT4ka91uH2W20n3zC4PXjwY4Mb6RZTUThSbW6UoM9OKhEoROdLicDKWOtbU0v6pdHQsV6qnhRLrEOUR9SgiDvF6lSqgqTRyw+VwAECQ15QebadbJpJFcDBRgrCLerhxkU0t6I80mOMayZU1MuNKqSLqAclVI2baXLjXutwe/5P5Jf8+atb9c3kBnNurW+20ezjFo/jY6qtklz3i3HjEa+UrsPFucXjSAUM7BxudR9zTS7ALZ7uzA0r1GqskPG4bqbFrTXV1euA7/wB1gHvfNvvzG9gQKTSWKQ2QWAV4HYZc8VrbrLDLVAjQsKq2c8NnoDfVTs4jZ2EwiiBaOkbFBD/PbaMSFNJ6ALmFqhjqRW35jaNLDsp84ArWVNosrOLoAsuogEFVvUMbpwDtpAqZFYBpsiRqJvJ3GBGkHavmuvur/zmrbde/5Lx6CefbiZ5Ui/Cwn7JfAy9XE1I3ypsMSaIy7Zfwi2X5PmDygN2mt9MbnBP+n3c+KW4hPIsbuirCKpl45dgJfUvK6OEroC6ziPNjbwUu5l6eULvVNqh4AZYro+qnxh1ZG7YvjxgboqtHL6EplFwhZoCqULQddRMzsFXuqvNhdA+4lxoYcyx2BUcbVL610h61ghXsRT5AOOT5y6hFQ3qa8RNWE7AE8rNidsPcOK4OW5XIErsL6/aPXTcLjgNR3PVQXHmNC3VPlthL4Ict925TSmStCs33dGX1RS9Gt3vMHhCuVG42gqPR/kxhD51TCYvR5WM8jE608oK8lu7JRgGsYL8nRh+PH2WsuPAP6+2eYmud7LeTxf8OusbRj9Nfcu/qIKa21yq/AXF4XFpB/l9Kz4i2kH+Tgy/zo4D/8ytXgtSlGnrNp/jZq+zyza3SIpG3yIdlovyWxSBtxfdxA3Ciu0gfzuGH6jIyK5WaV80O2GoxcpxO39SUT36FsXjHm7x5LOT2O8ESyx9s4L87Rh+fOz3cvM1OaUO0qN8LG4UrjZDktCp380Fxa6NjoYNA9XlZs1vVpC/HcMfxZobB/45PM4BRDe/XcwvmUxiKzxOG+6CYteaG0WwKQLf4mb6k1aQvx3DzwPNTQf+KTyuOFDv/Mn3V3bs6B2nLbd++1DFS1S12w6Ci5c4cdycOG5OHLdD53alaybLJZGVcqSujNslj48I47RSkAvj3JmS0nHbz7q7vR/AcUJ9ApY+BOAD93gBKyygQcflKbTPJ63hJdWcUuTTd8SNP4px3Pakb+34pN+c/qQPASByXx+4x9OuuAVDx+VvUWifudVn/+nDI8ftqrj17AfoOKH52YB9Ph2+qRB8fPdZChHrLxtKbSGFcfbNOp/ruO2DW89+AOub9dmAzS1Qt0ZBLzdfk7M+9HPc9s+tux/A9k1/NoComgP39MHG6Fgfl79FoX38mkrVLo6b367eL2nvB/DExp8N6E9ArO8KcJeU93c4tC+rckTH5WXjTyK3+jz9nA/pV8Kx+mDW3cLpzDXkJs7+qt7Jh1bfnDhuTtz/Y3g95f/pg0u4zlqvywAAAABJRU5ErkJggg==" alt="An image"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/22/2021, 5:42:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe/var_type.html" class="prev">
        变量和类型
      </a></span> <span class="next"><a href="/fe/context_execution_stack_this.html">
        执行上下文、执行栈、this
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.8a524e1d.js" defer></script><script src="/assets/js/2.d1d9ac8d.js" defer></script><script src="/assets/js/19.2476f38a.js" defer></script>
  </body>
</html>
