<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<div class="outer">
  <div class="inner">inner</div>
</div>
<script>
	// Let's get hold of those elements
	var outer = document.querySelector('.outer');
	var inner = document.querySelector('.inner');

	// Let's listen for attribute changes on the
	// outer element
	new MutationObserver(function () {
		console.log('mutate');
	}).observe(outer, {
		attributes: true,
	});

	// Here's a click listener…
	function onClick(e) {
		console.log(e.target.textContent)
		console.log('click');

		setTimeout(function () {
			console.log('timeout');
		}, 0);

		Promise.resolve().then(function () {
			console.log('promise');
		});

		outer.setAttribute('data-random', Math.random());
	}

	// …which we'll attach to both elements
	inner.addEventListener('click', onClick);
	outer.addEventListener('click', onClick);
	/**
	inner
	click
	promise
	mutate
	inner
	click
	promise
	mutate
	timeout
	timeout
  **/

	console.log(1)
  setTimeout(() => {
  	console.log(9)
  }, 0)
  new Promise((resolve => {
  	console.log(2)
  	resolve(1)
  })).then(res => {
  	console.log(5)
  })
	new Promise((resolve => {
		resolve(1)
    console.log(3)
	})).then(res => {
		console.log(6)
		new Promise((resolve => {
			resolve(1)
			console.log(7)
		})).then(res => {
			console.log(8)

		})
	})
  console.log(4)
</script>
</body>
</html>
